<?xml version="1.0" encoding="UTF-8" standalone="no"?><Entities build="b535" majorVersion="8" minorVersion="3" modelPersistenceProviderPackage="H2PersistenceProviderPackage" revision="2" schemaVersion="1030" universal=""><StyleDefinitions/><Networks/><PersistenceProviderPackages/><Mashups/><ScriptFunctionLibraries/><Projects><Project dependsOn="" description="" documentationContent="" homeMashup="" lastModifiedDate="2018-12-28T18:32:25.085+01:00" name="FarmProject" packageVersion="1.0.0" projectName="FarmProject" tags="FarmTag:Farm Application"><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility><Principal isPermitted="true" name="Everyone" type="Organization"/></Visibility></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables/><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : tags : updated, name : updated&#10;" timestamp="2018-12-28T18:20:10.929+01:00" user="Administrator"/></ConfigurationChanges></Project></Projects><Users/><DirectoryServices/><Widgets/><MediaEntities/><Groups/><PersistenceProviders/><NotificationContents/><ModelTags><ModelTagVocabulary description="" documentationContent="" homeMashup="" isDynamic="false" lastModifiedDate="2018-12-28T14:45:29.772+01:00" name="FarmTag" projectName="FarmProject" tags=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables/><VocabularyTerm description="" name="Farm Application"/><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated&#10;" timestamp="2018-12-28T14:44:04.304+01:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="terms : Farm Application : added&#10;" timestamp="2018-12-28T14:45:29.772+01:00" user="Administrator"/></ConfigurationChanges></ModelTagVocabulary></ModelTags><LocalizationTables/><Dashboards/><DataAnalysisDefinitions/><DataShapes/><Things><Thing description="" documentationContent="" effectiveThingPackage="TimerThing" enabled="true" homeMashup="" identifier="" lastModifiedDate="2018-12-28T18:11:53.515+01:00" name="Barn_data_simulator" projectName="FarmProject" published="false" tags="" thingTemplate="Timer" valueStream=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables><ConfigurationTable description="General Settings" isMultiRow="false" name="Settings" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition aspect.defaultValue="true" baseType="BOOLEAN" description="Automatically enable timer on startup" name="enabled" ordinal="0"/><FieldDefinition baseType="USERNAME" description="User context in which to run event handlers" name="runAsUser" ordinal="0"/><FieldDefinition aspect.defaultValue="60000.0" baseType="NUMBER" description="Update rate" name="updateRate" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><enabled>true</enabled><runAsUser><![CDATA[Administrator]]></runAsUser><updateRate>30000.0</updateRate></Row></Rows></ConfigurationTable></ConfigurationTables><ThingShape><PropertyDefinitions/><ServiceDefinitions/><EventDefinitions/><ServiceMappings/><ServiceImplementations/><Subscriptions><Subscription enabled="true" eventName="Timer" source="" sourceProperty="" sourceType="Thing"><ServiceImplementation description="" handlerName="Script" name="Event.Timer"><ConfigurationTables><ConfigurationTable description="" isMultiRow="false" name="Script" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[// Populate properties for the house the first time the service runs only.
if (!Things["Barn2"].buildingID) {
	Things["Barn2"].buildingID = "12346";
	Things["Barn2"].building_lat_long = "45.296375,-75.214556,0";
	Things["Barn2"].temperature = 70;
}

// Thermostat logic
//	If temperature is above 72, turn AC on, 
//	If temperature is below 70, turn AC off
var temp = Things["Barn2"].temperature;
if(temp > 72){
    me.isACrunning = true;
    Things["Barn2"].watts = 100;
}

if(temp < 70.1){
    me.isACrunning = false;
    Things["Barn2"].watts = 0;
}

// Simulate temperature change based on AC status
//	decrease temperature if AC is on,
//	otherwise increase temperature a small amount 
if (me.isACrunning){
	Things["Barn2"].temperature = temp - 0.5;
} else {
    Things["Barn2"].temperature = temp + 0.2;
}]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation></Subscription></Subscriptions></ThingShape><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations/><ImplementedShapes/><ThingProperties/><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated, thingTemplate : updated&#10;" timestamp="2018-12-28T17:46:38.028+01:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="properties : isACrunning : added, isACrunning : removed&#10;configuration : updateRate : updated, runAsUser : updated&#10;subscriptions : Me:Timer : added&#10;" timestamp="2018-12-28T17:51:15.601+01:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="subscriptions : Me:Timer : code updated&#10;" timestamp="2018-12-28T18:07:54.472+01:00" user="Administrator"/></ConfigurationChanges></Thing><Thing description="" documentationContent="" effectiveThingPackage="TimerThing" enabled="true" homeMashup="" identifier="" lastModifiedDate="2018-12-28T17:48:50.037+01:00" name="House_data_simulator" projectName="FarmProject" published="false" tags="" thingTemplate="Timer" valueStream=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables><ConfigurationTable description="General Settings" isMultiRow="false" name="Settings" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition aspect.defaultValue="true" baseType="BOOLEAN" description="Automatically enable timer on startup" name="enabled" ordinal="0"/><FieldDefinition baseType="USERNAME" description="User context in which to run event handlers" name="runAsUser" ordinal="0"/><FieldDefinition aspect.defaultValue="60000.0" baseType="NUMBER" description="Update rate" name="updateRate" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><enabled>true</enabled><runAsUser><![CDATA[Administrator]]></runAsUser><updateRate>30000.0</updateRate></Row></Rows></ConfigurationTable></ConfigurationTables><ThingShape><PropertyDefinitions><PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.defaultValue="true" aspect.isLogged="false" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="BOOLEAN" category="" description="" isLocalOnly="false" name="isACrunning" ordinal="1"/></PropertyDefinitions><ServiceDefinitions/><EventDefinitions/><ServiceMappings/><ServiceImplementations/><Subscriptions><Subscription enabled="true" eventName="Timer" source="" sourceProperty="" sourceType="Thing"><ServiceImplementation description="" handlerName="Script" name="Event.Timer"><ConfigurationTables><ConfigurationTable description="" isMultiRow="false" name="Script" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[// Populate properties for the house the first time the service runs only.
if (!Things["Barn"].buildingID) {
	Things["Barn"].buildingID = "12345";
	Things["Barn"].building_lat_long = "42.296375,-71.214556,0";
	Things["Barn"].temperature = 70;
}

// Thermostat logic
//	If temperature is above 72, turn AC on, 
//	If temperature is below 70, turn AC off
var temp = Things["Barn"].temperature;
if(temp > 72){
    me.isACrunning = true;
    Things["Barn"].watts = 100;
}

if(temp < 70.1){
    me.isACrunning = false;
    Things["Barn"].watts = 0;
}

// Simulate temperature change based on AC status
//	decrease temperature if AC is on,
//	otherwise increase temperature a small amount 
if (me.isACrunning){
	Things["Barn"].temperature = temp - 0.5;
} else {
    Things["Barn"].temperature = temp + 0.2;
}]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation></Subscription></Subscriptions></ThingShape><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations><AlertDefinitions name="isACrunning"/></AlertConfigurations><ImplementedShapes/><ThingProperties/><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="" timestamp="2018-12-28T16:33:21.465+01:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="subscriptions : Me:Timer : code updated&#10;" timestamp="2018-12-28T16:49:29.833+01:00" user="Administrator"/></ConfigurationChanges></Thing><Thing description="" documentationContent="" effectiveThingPackage="ValueStreamThing" enabled="true" homeMashup="StreamMashup" identifier="" lastModifiedDate="2018-12-28T15:46:06.887+01:00" name="Farm_ValueStream" projectName="FarmProject" published="false" tags="FarmTag:Farm Application" thingTemplate="ValueStream" valueStream=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables><ConfigurationTable description="Data Thing Configuration" isMultiRow="false" name="DataThingSettings" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="Persistence Provider Name" name="persistenceProvider" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><persistenceProvider><![CDATA[ThingworxPersistenceProvider]]></persistenceProvider></Row></Rows></ConfigurationTable><ConfigurationTable description="Configurable options to tune Value Stream performance" isMultiRow="false" name="PersistenceProviderCustomSettings" ordinal="2"><DataShape><FieldDefinitions><FieldDefinition aspect.friendlyName="Persistence Provider Custom Settings Table" baseType="INFOTABLE" description="Persistence Provider Custom Config Table" name="customConfigTable" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><customConfigTable><infoTable><DataShape><FieldDefinitions/></DataShape><Rows/></infoTable></customConfigTable></Row></Rows></ConfigurationTable></ConfigurationTables><ThingShape><PropertyDefinitions/><ServiceDefinitions/><EventDefinitions/><ServiceMappings/><ServiceImplementations/><Subscriptions/></ThingShape><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations/><ImplementedShapes/><ThingProperties/><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated, tags : updated&#10;" timestamp="2018-12-28T15:46:06.887+01:00" user="Administrator"/></ConfigurationChanges></Thing><Thing description="" documentationContent="" effectiveThingPackage="ConfiguredThing" enabled="true" homeMashup="" identifier="" lastModifiedDate="2018-12-28T16:49:48.572+01:00" name="Barn" projectName="FarmProject" published="false" tags="FarmTag:Farm Application" thingTemplate="BuildingTemplate" valueStream=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables/><ThingShape><PropertyDefinitions/><ServiceDefinitions/><EventDefinitions/><ServiceMappings/><ServiceImplementations/><Subscriptions/></ThingShape><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations/><ImplementedShapes/><ThingProperties><watts><Value>0.0</Value><Timestamp>2018-12-28T19:08:50.097+01:00</Timestamp><Quality>GOOD</Quality></watts><temperature><Value>71.60000000000059</Value><Timestamp>2018-12-28T19:12:20.096+01:00</Timestamp><Quality>GOOD</Quality></temperature><building_lat_long><Value>42.296375,-71.214556,0.0</Value><Timestamp>2018-12-28T16:49:29.887+01:00</Timestamp><Quality>GOOD</Quality></building_lat_long><buildingID><Value><![CDATA[12345]]></Value><Timestamp>2018-12-28T16:49:29.886+01:00</Timestamp><Quality>GOOD</Quality></buildingID></ThingProperties><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated, tags : updated&#10;" timestamp="2018-12-28T15:37:32.632+01:00" user="Administrator"/></ConfigurationChanges></Thing><Thing description="" documentationContent="" effectiveThingPackage="ConfiguredThing" enabled="true" homeMashup="" identifier="" lastModifiedDate="2018-12-28T18:11:29.925+01:00" name="Barn2" projectName="FarmProject" published="false" tags="FarmTag:Farm Application" thingTemplate="BuildingTemplate" valueStream=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables/><ThingShape><PropertyDefinitions/><ServiceDefinitions/><EventDefinitions/><ServiceMappings/><ServiceImplementations/><Subscriptions/></ThingShape><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations/><ImplementedShapes/><ThingProperties><watts><Value>0.0</Value><Timestamp>1970-01-01T01:00:00.000+01:00</Timestamp><Quality>UNKNOWN</Quality></watts><temperature><Value>70.0</Value><Timestamp>2018-12-28T18:11:53.583+01:00</Timestamp><Quality>GOOD</Quality></temperature><building_lat_long><Value>45.296375,-75.214556,0.0</Value><Timestamp>2018-12-28T18:11:53.583+01:00</Timestamp><Quality>GOOD</Quality></building_lat_long><buildingID><Value><![CDATA[12346]]></Value><Timestamp>2018-12-28T18:11:53.582+01:00</Timestamp><Quality>GOOD</Quality></buildingID></ThingProperties><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated&#10;" timestamp="2018-12-28T18:11:29.925+01:00" user="Administrator"/></ConfigurationChanges></Thing></Things><Logs/><Authenticators/><ThingPackages/><NotificationDefinitions/><ApplicationKeys/><StateDefinitions/><ThingTemplates><ThingTemplate baseThingTemplate="GenericThing" description="" documentationContent="" effectiveThingPackage="ConfiguredThing" homeMashup="" lastModifiedDate="2018-12-28T15:49:56.239+01:00" name="BuildingTemplate" projectName="FarmProject" tags="FarmTag:Farm Application" thingPackage="" valueStream="Farm_ValueStream"><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables/><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations><AlertDefinitions name="building_lat_long"/><AlertDefinitions name="buildingID"/><AlertDefinitions name="temperature"/><AlertDefinitions name="watts"/></AlertConfigurations><ThingShape><PropertyDefinitions><PropertyDefinition aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="true" baseType="NUMBER" category="" description="" isLocalOnly="false" name="watts" ordinal="4"/><PropertyDefinition aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="true" baseType="NUMBER" category="" description="" isLocalOnly="false" name="temperature" ordinal="5"/><PropertyDefinition aspect.dataChangeType="VALUE" aspect.isPersistent="true" baseType="LOCATION" category="" description="" isLocalOnly="false" name="building_lat_long" ordinal="3"/><PropertyDefinition aspect.dataChangeType="VALUE" aspect.isLogged="false" aspect.isPersistent="true" baseType="STRING" category="" description="" isLocalOnly="false" name="buildingID" ordinal="2"/></PropertyDefinitions><ServiceDefinitions/><EventDefinitions/><ServiceMappings/><ServiceImplementations/><Subscriptions/></ThingShape><ImplementedShapes/><SharedConfigurationTables/><InstanceDesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></InstanceDesignTimePermissions><InstanceRunTimePermissions/><InstanceVisibilityPermissions><Visibility/></InstanceVisibilityPermissions><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated, tags : updated&#10;" timestamp="2018-12-28T14:54:24.336+01:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="properties : buildingID : added, building_lat_long : added, watts : added, temperature : added&#10;" timestamp="2018-12-28T15:25:14.895+01:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="header : valueStream : updated&#10;" timestamp="2018-12-28T15:49:20.677+01:00" user="Administrator"/></ConfigurationChanges></ThingTemplate></ThingTemplates><ExtensionPackages/><Organizations/><Menus/><Resources/><DataTags/><ThingShapes/><Subsystems/></Entities>